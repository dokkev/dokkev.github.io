<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p>If you‚Äôre working with CAN bus networks on a Linux machine, chances are you‚Äôre using hardware from PEAK-System. While newer Linux kernels natively support many PCAN interfaces via SocketCAN, there are plenty of scenarios where you need to get your hands dirty and manually install the proprietary drivers.</p> <p>Whether you are working in a minimized Linux environment, running an older kernel, or specifically need the character-based driver (<code class="language-plaintext highlighter-rouge">chardev</code>) to use the <strong>PCAN-Basic API</strong> (like the PCAN Python API), this guide will walk you through the entire installation process from start to finish.</p> <hr> <h2 id="part-1-installing-the-pcan-linux-driver">Part 1: Installing the PCAN Linux Driver</h2> <p>First, we need to install the core driver. You can find the latest proprietary <a href="https://www.peak-system.com/fileadmin/media/linux/index.php#Section_Driver-Proproetary" rel="external nofollow noopener" target="_blank">PCAN-Linux driver package here</a>. For deeper technical details, you can always refer to the official <a href="https://www.peak-system.com/fileadmin/media/linux/files/PCAN-Driver-Linux_UserMan_eng.pdf" rel="external nofollow noopener" target="_blank">PCAN Driver Manual</a>.</p> <h3 id="step-1-download-and-extract">Step 1: Download and Extract</h3> <p>Once you‚Äôve downloaded the driver package, open your terminal and extract the files:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar</span> <span class="nt">-xzvf</span> peak-linux-driver-<span class="k">*</span>.tar.gz
</code></pre></div></div> <p>Navigate into the newly created directory and clear out any old build files:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>peak-linux-driver-<span class="k">*</span>
make clean
</code></pre></div></div> <h3 id="step-2-install-dependencies">Step 2: Install Dependencies</h3> <p>Before we can compile the driver, our system needs a few development libraries. Install them using <code class="language-plaintext highlighter-rouge">apt</code>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>libelf-dev libpopt-dev
</code></pre></div></div> <h3 id="step-3-compile-and-install">Step 3: Compile and Install</h3> <p>Now you are ready to build the driver. Run the following commands:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make clean
make
<span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div></div> <blockquote> <p><strong>üõ†Ô∏è Troubleshooting: GCC Errors</strong> If you encounter compilation errors and are using <code class="language-plaintext highlighter-rouge">gcc-11</code>, try compiling with <code class="language-plaintext highlighter-rouge">gcc-12</code> instead. You can do this by specifying the compiler in your make command:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>make clean
make <span class="nv">CC</span><span class="o">=</span>gcc-12
<span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div> </div> </blockquote> <h3 id="a-note-on-socketcan-vs-pcan-basic">A Note on SocketCAN vs. PCAN-Basic</h3> <p>By default, running the standard <code class="language-plaintext highlighter-rouge">make</code> command builds the driver with <strong><code class="language-plaintext highlighter-rouge">chardev</code></strong> (Character Device) support. This is exactly what you need if you plan to use the PCAN-Basic API.</p> <p>However, if your goal is to use the device with <strong>SocketCAN</strong> (which typically works without driver installation on modern kernels, but might need an update on older ones), you must explicitly rebuild the driver with network device support (<code class="language-plaintext highlighter-rouge">netdev</code>):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make <span class="nt">-C</span> driver <span class="nv">NET</span><span class="o">=</span>NETDEV_SUPPORT
</code></pre></div></div> <hr> <h2 id="part-2-installing-the-pcan-basic-api">Part 2: Installing the PCAN-Basic API</h2> <p>With the base driver installed via <code class="language-plaintext highlighter-rouge">chardev</code>, we can now install the PCAN-Basic API. This API provides the necessary libraries to write custom applications (in C++, Python, etc.) that communicate with your CAN bus.</p> <h3 id="step-1-download-and-extract-1">Step 1: Download and Extract</h3> <p>Head over to the PEAK-System website and <a href="https://www.peak-system.com/PCAN-Basic.239.0.html?&amp;L=1" rel="external nofollow noopener" target="_blank">Download the PCAN-Basic API for Linux</a>.</p> <p>Extract the tarball and navigate into the <code class="language-plaintext highlighter-rouge">pcanbasic</code> source directory:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tar</span> <span class="nt">-xzvf</span> PCAN-Basic_Linux-<span class="k">*</span>.tar.gz
<span class="nb">cd </span>PCAN-Basic_Linux-<span class="k">*</span>/libpcanbasic/pcanbasic/
</code></pre></div></div> <h3 id="step-2-compile-and-install">Step 2: Compile and Install</h3> <p>Just like with the driver, we will clean, make, and install the API libraries:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make clean
make
<span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div></div> <hr> <h2 id="part-3-load-the-driver-no-reboot-required">Part 3: Load the Driver (No Reboot Required!)</h2> <p>Normally, installing kernel modules requires a system reboot. However, you can bypass this and start using your CAN interface immediately by asking the Linux kernel to probe for the newly installed PCAN module:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>modprobe pcan
</code></pre></div></div> <p>Plug in your PCAN hardware, and you are ready to start sniffing, sending, and analyzing CAN frames!</p> </body></html>